<app-service-header
  [serviceTitle]="'Talk to us'"
  [headingText]="'Contact Us'"
  [showBlueYellowDiv]="true"
  [bannerText]="'Check how our clients and partners are saying about usâ€¦'"
  [descriptionText]="
    'Want to fund us or partner with us? Use the form below and we will get in touch.'
  "
>
</app-service-header>

<div class="flex flex-col lg:flex-row justify-center gap-8 w-full py-8 px-4">
  <!-- Contact Details Section -->
  <div class="contact-details w-full lg:w-1/3">
    <div class="flex flex-col my-8">
      <span class="text-sm uppercase text-black-3">Our Contacts</span>
      <span class="text-xl text-black-2">Get in Touch</span>
      <span
        class="text-lg font-semibold text-black flex items-center pb-8 pt-4"
      >
        <span class="dot-line mr-2"></span>
        <span class="dot mr-1"></span>
      </span>

      <!-- Address -->
      <div class="flex items-start gap-4">
        <img
          src="assets/images/svg/address.png"
          alt="Address"
          class="w-6 h-6"
        />
        <div class="flex flex-col">
          <span class="text-sm font-semibold text-black-2">Address</span>
          <span class="text-xs font-thin text-gray-1400"
            >Rhapta Heights Building, 3rd Floor, Rhapta Road, Nairobi</span
          >
        </div>
      </div>

      <!-- Phone -->
      <div class="flex items-start gap-4 mt-4">
        <img src="assets/images/svg/support.png" alt="Phone" class="w-6 h-6" />
        <div class="flex flex-col">
          <span class="text-sm font-semibold text-black-2">Phone</span>
          <span class="text-xs font-thin text-gray-1400"
            >Phone: +254 110 701 174</span
          >
        </div>
      </div>

      <!-- Email -->
      <div class="flex items-start gap-4 mt-4">
        <img
          src="assets/images/svg/newsletter.jpg"
          alt="Email"
          class="w-6 h-6"
        />
        <div class="flex flex-col">
          <span class="text-sm font-semibold text-black-2">Email</span>
          <span class="text-xs font-thin text-gray-1400"
            >Email: info&#64;jackfruitfoundation.com</span
          >
        </div>
      </div>
    </div>
  </div>

  <!-- Contact Form Section -->
  <div class="contact-form w-full lg:w-1/3">
    <div class="flex flex-col mt-8">
      <span class="text-sm uppercase text-black-3">Send a Message</span>
      <span class="text-xl text-black-2">Get in Touch</span>
      <span
        class="text-lg font-semibold text-black flex items-center pb-8 pt-4"
      >
        <span class="dot-line mr-2"></span>
        <span class="dot mr-1"></span>
      </span>
    </div>
    <div>
      <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
        <div class="flex justify-between gap-4">
          <div class="w-full">
            <input
              type="text"
              formControlName="name"
              class="w-full h-8 border border-transparent rounded-3xl mb-4 bg-gray-1700 px-4 placeholder:text-xs placeholder:text-gray-1400 placeholder:tracking-tighter"
              [ngClass]="{ 'border-red-200': isFieldInvalid('name') }"
              placeholder="Your Name *"
            />
            <div
              *ngIf="isFieldInvalid('name')"
              class="text-red-200 text-xs -mt-3 mb-3"
            >
              {{ getErrorMessage('name') }}
            </div>
          </div>
          <div class="w-full">
            <input
              type="email"
              formControlName="email"
              class="w-full h-8 border border-transparent rounded-3xl mb-4 bg-gray-1700 px-4 placeholder:text-xs placeholder:text-gray-1400 placeholder:tracking-tighter"
              [ngClass]="{ 'border-red-200': isFieldInvalid('email') }"
              placeholder="Your Email *"
            />
            <div
              *ngIf="isFieldInvalid('email')"
              class="text-red-200 text-xs -mt-3 mb-3"
            >
              {{ getErrorMessage('email') }}
            </div>
          </div>
        </div>
        <div>
          <input
            type="text"
            formControlName="subject"
            class="w-full h-8 border border-transparent rounded-3xl mb-4 bg-gray-1700 px-4 placeholder:text-xs placeholder:text-gray-1400 placeholder:tracking-tighter"
            [ngClass]="{ 'border-red-200': isFieldInvalid('subject') }"
            placeholder="Subject *"
          />
          <div
            *ngIf="isFieldInvalid('subject')"
            class="text-red-200 text-xs -mt-3 mb-3"
          >
            {{ getErrorMessage('subject') }}
          </div>
        </div>
        <div>
          <textarea
            formControlName="message"
            class="w-full h-24 border border-transparent rounded-3xl bg-gray-1700 px-4 py-2 placeholder:text-xs placeholder:text-gray-500"
            [ngClass]="{ 'border-red-200': isFieldInvalid('message') }"
            placeholder="Your Message *"
          ></textarea>
          <div
            *ngIf="isFieldInvalid('message')"
            class="text-red-200 text-xs mt-1"
          >
            {{ getErrorMessage('message') }}
          </div>
        </div>

        <!-- Success and Error Messages -->
        <div
          *ngIf="submitSuccess"
          class="mt-4 p-4 bg-green-100 text-green-700 rounded-lg"
        >
          Your message has been sent successfully. We'll get back to you soon!
        </div>
        <div
          *ngIf="submitError"
          class="mt-4 p-4 bg-red-100 text-red-700 rounded-lg"
        >
          There was an error sending your message. Please try again later.
        </div>

        <button
          type="submit"
          [disabled]="!contactForm.valid || isSubmitting"
          class="w-full h-10 bg-blue hover:bg-blue-700 text-white text-sm py-2 px-4 rounded-3xl mt-4 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <span *ngIf="!isSubmitting">Send Message</span>
          <span *ngIf="isSubmitting" class="flex items-center justify-center">
            <svg
              class="w-5 h-5 mr-2 animate-spin"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle
                class="opacity-25"
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                stroke-width="4"
              ></circle>
              <path
                class="opacity-75"
                fill="currentColor"
                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
              ></path>
            </svg>
            Sending...
          </span>
        </button>
      </form>
    </div>
  </div>
</div>

<!-- Map View Section -->
<div class="map-view w-full h-80">
  <iframe
    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3988.848087009624!2d36.78120437521524!3d-1.2635951987243772!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x182f176043ce69c1%3A0x6090d501f3e0c8d4!2sRhapta%20Heights!5e0!3m2!1sen!2ske!4v1741118583757!5m2!1sen!2ske"
    width="100%"
    height="100%"
    style="border: 0"
    allowfullscreen=""
    loading="lazy"
    referrerpolicy="no-referrer-when-downgrade"
  ></iframe>
</div>
